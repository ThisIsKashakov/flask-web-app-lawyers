{% extends "base.html" %}

{% block title %}
    Edit Court
{% endblock %}

{% block content %}
    <div class="container mt-4">
        <div class="text-center">
            <h1>Edit Court</h1>
            <hr />
        </div>

        <form method="post">
            <div class="form-group">
                <label for="exampleInputTitle1">Title</label>
                <input
                    type="text"
                    class="form-control"
                    id="exampleInputTitle1"
                    name="title"
                    value="{{ court.title }}"
                    aria-describedby="titleHelp"
                    placeholder="Enter title"
                />
            </div>
            <div class="form-group">
                <label for="exampleInputAddress1">Address</label>
                <input
                    type="text"
                    class="form-control"
                    id="exampleInputAddress1"
                    name="address"
                    value="{{ court.address }}"
                    placeholder="Enter address"
                />
            </div>
            <div class="btn-group" role="group">
                <button type="submit" class="btn btn-primary">Submit</button>
                <button
                    type="button"
                    class="btn btn-danger ml-2"
                    onclick="deleteCourt(this)"
                    data-court-id="{{ court.id }}"
                >
                    Delete
                </button>
            </div>
        </form>
    </div>

    <script>
        function deleteCourt(button) {
            var courtId = button.getAttribute("data-court-id");
            if (confirm("Are you sure you want to delete this court?")) {
                fetch("/delete-court", {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json",
                    },
                    body: JSON.stringify({ court_id: courtId }),
                })
                    .then((response) => {
                        if (response.ok) {
                            window.location.href = "/";
                        } else {
                            response.json().then((data) => {
                                alert(data.error || "Failed to delete the court.");
                            });
                        }
                    })
                    .catch((error) => {
                        alert("Failed to delete the court.");
                    });
            }
        }
    </script>
{% endblock %}
